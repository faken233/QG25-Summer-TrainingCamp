#  Linux

 操作系统是用户与计算机硬件之间的桥梁

## **一、背景知识了解**

### Linux系统的组成

* Linux系统内核：**最核心功能（硬件调度管理）**
* 系统及应用程序

### 虚拟机的介绍

* 借助虚拟机获得可用的Linux系统环境进行学习

* 通过软件模拟计算机硬件，并给虚拟硬件安装真实的操作系统

### 虚拟机快照

* 通过快照将当前虚拟机的状态保存下来，以后可通过快照回复虚拟机到保存的状态
* 将虚拟机关机后，进行快照操作（具体见视频）



## 二、基础知识

### 1、Linux的目录结构

* 是一个**树型结构**，只有一个**根目录“/”**，所有文件都在他下面

#### Linux路径的描述方式

* 路径之间的**层级关系**，使用：**/** 来表示，**开头的“/”表示根目录**

### 2、 Linux命令基础

* **什么是命令、命令行？**
	* 命令行：即Linux终端(Terminal),是一种**命令提示符页面**。以**纯“字符”**的形式操作系统，可以使用**各种字符化命令**对系统发出操作指令
	* 命令：即Linux程序一个命令就是**一个Linux的程序**。命令没有图形化页面,可以在命令行(终端中)提供**字符化的反馈**。

* **命令基础格式**

	```
	command [-options] [parameter]
	```

	* **command**:命令本身
	* **-options**:[可选,非必填]命令的一些选项,可以通过选项**控制命令的行为细节**
	* **parameter**:[可选,非必填]命令的参数,多数用于**命令的指向目标等**语法中的0,表示**可选的意思**

### 3、ls命令入门

* **ls命令的作用：列出目录下的内容**

* 语法细节如下：

	* **-a-l-h**是可选的选项
	* **Linux路径**是此命令可选的参数

	```
	ls [-a -h -l][Linux路径]
	```

​	

* 当不使用选项和参数，**直接使用ls命令本体**，表示:  *以平铺形式,列出当前工作目录下的内容*（启动时**默认HOME为工作目录**）

* HOME目录： 每个Linux操作用户在Linux系统的个人账户目录,路径在:**/home/用户名**

### 4、ls命令的参数与选项

* ls命令的参数

	* 当使用参数，ls命令的参数表示:指定一个Linux路径，**列出指定路径的内容**

		

* ls命令的 -a选项：**all的意思，即列出全部文件(包含隐藏的文件/文件夹)**

* ls命令的 -l选项：**以列表(竖向排列)的形式展示内容，并展示更多信息**

* ls命令选项的组合使用

	```
	ls -l -a
	ls -la
	ls -al
	```

* ls命令的 -h选项：表示以易于阅读的形式，**列出文件大小**，如K、M、G

* -h选项**必须要搭配 -l一起使用**

### 5、-cd -pwd命令

* **-cd：更改当前所在的工作目录**
	* cd命令无需选项，**只有参数，表示要切换到哪个目录下**
	* cd命令**直接执行，不写参数**，表示回到用户的**HOME目录**

* **-pwd：查看当前工作目录**
	* pwd命令，无选项，无参数，**直接输入pwd即可**

### 6、相对路径和绝对路径

* 绝对路径写法

	* 以**根目录**为起点，描述路径的一种写法，**路径描述以/开头**

	```
	cd /home/itheima/Desktop
	```

* 相对路径写法
	* 以**当前目录**为起点，描述路径的一种写法，路径描述**无需以/开头**	

```
cd Desktop
```

* 特殊路径符
	* **.   :** 表示**当前目录**，比如**cd ./Desktop** 表示**切换到当前目录下的Desktop目录内**，和cd Desktop效果一致
	* **..  :** 表示**上一级目录**，比如:**cd .. **即可切换到上一级目录，**cd../..**切换到上二级的目录
	* **~  :** **cd~** 即可切换到HOME目录或**cd~/Desktop**，切换到HOME内的Desktop目录

​	

### 7、mkdir命令

* **mkdir：创建新的目录(文件夹)**

	```
	mkdir[-p]Linux路径
	```

* 参数必填，**表示Linux路径**，即要**创建的文件夹的路径**，相对路径或绝对路径均可
* -p 选项可选，表示**自动创建不存在的父目录**，适用于创建连续多，层级的目录

==注意:创建文件夹需要修改权限,请确保操作均在HOME目录内,不要在HOME外操作涉及到权限问题，HOME外无法成功==



### 8、touch cat more命令

* **touch：创建文件**

	* touch命令**无选项，参数必填**，表示要**创建的文件路径**，相对、绝对、特殊路径符均可以使用

	```
	touch Linux路径
	```

	

* **cat：查看文件内容**
	* cat没有选项，只有必填参数，**参数表示:被查看的文件路径**，相对、绝对、特殊路径符都可以使用

```
cat Linux路径
```

* **more：查看文件内容（支持翻页）**
	* 同样没有选项，只有必填参数，**参数表示:被查看的文件路径**，相对、绝对、特殊路径符都可以使用
	* **空格翻页，“q”可以退出**

```
more Linux路径
```



### 9、cp mv rm命令

* **cp：用于复制文件\文件夹**

	* -r选项，可选，用于复制文件夹使用，表示递归
	* 参数1，Linux路径，表示**被复制的文件或文件夹**
	* 参数2，Linux路径，表示**要复制去的地方**

	```
	cp [-r] 参数1 参数2
	```

* **mv：移动文件\文件夹**

	* 参数1，Linux路径，表示**被移动的文件或文件夹**
	* 参数2，Linux路径，表示**要移动去的地方**，如果==*目标不存在，则进行改名*==，确保目标存在

* **rm：删除文件/文件夹**

	* 参数1、参数2、…、参数N 表示**要删除的文件或文件夹路径**，按照 *空格* 隔开

	* 同cp命令一样，-r选项用于**删除文件夹**
	* -f表示force，**强制删除(不会弹出提示确认信息)**
		* 普通用户删除内容不会弹出提示，只有**root管理员用户删除内容会有提示**所以一般普通
		* 用户用不到-f选项

```
rm [-r -f] 参数1 参数2 参数N
```

* **rm删除文件、文件夹-通配符**

	==通配符*，用来做模糊匹配==

	* test*，表示匹配任何**以test开头**的内容
	* *test，表示匹配任何**以test结尾**的内容
	* \*test*，表示匹配任何**包含test**的内容

==请千万千万不要在root管理员用户下执行：**rm -rf / 或者 rm -rf /\***==



### 10、切换为管理员

* **su - root（保留空格**） ，并输入密码123456

* 输入exit命令，退回普通用户

	

### 11、which find命令

* **which：查看所使用的一系列命令的程序文件存放在哪里**

```
which 要查找的命令
```

* **find：搜索指定的文件–按文件名查找**
	* 我们可以切换到root用户以获得管理员权限，在整个系统完成搜索
	* ==通配符*，用来做模糊搜索（规则可见二、9）==

```
find 起始路径 -name "被查找文件名"
```

* **find：搜索指定文件–按文件大小查找**
	* +、-表示大于和小于
	* n表示大小数字
	* kMG表示大小单位，k(小写字母)表示kb，M表示MB, G表示GB

```
find 起始路径 -size +/-n[kMG]
```



### 12、grep wc命令 管道符

* **grep：从文件中通过关键字过滤文件行。**
	* 选项-n，可选，表示**在结果中显示匹配的行的行号**。
	* 参数，关键字，必填，表示**过滤的关键字**，带有空格或其它特殊符号，==建议使用””将关键字包围起来==
	* 参数，文件路径，必填，表示要**过滤内容的文件路径**，可作为内容输入端口

```
grep [-n] 关键字 文件路径
```

* **wc：统计文件行数、单词数量**
	* 选项，-C，统计**bytes数量**
	* 选项，-m，统计**字符数量**
	* 选项，-l，统计**行数**
	* 选项，-w，统计**单词数量**
	* 参数，文件路径，被统计的文件，可作为内容输入端口

```
wc [-c-m-1-w] 文件路径
```

* **管道符：将管道符左边命令的结果，作为右边命令的输入**
	* cat itheima.txt的输出结果(文件内容)
	* 作为右边grep命令的输入(被过滤文件)

```
cat itheima.txt | grep itheima

result：
itheima is a brand of itcast .
```

​	

### 13、echo、tail命令 重定向符

* **echo：在命令行输出指定内容**

	* **复杂内容用“”包围**

* ```
	echo 输出的内容
	```

*  **反引号`**
	* 将命令用反引号(通常也称之为飘号)\`将其包围
	* 被`包围的内容，会被作为命令执行，而非普通字符

* **重定向符**

	* \> : 将左侧命令的结果，**覆盖写入**到符号右侧指定的文件中

	* \>> :  将左侧命令的结果，**追加写入**到符号右侧指定的文件

	* ```
		echo "Hello Linux"> itheima.txt
		cat itheima.txt
		
		result:
		Hello linux
		
		"Hello itcast">>itheima.txt 
		cat itheima.txt
		
		result:
		Hello itheima
		Hello itcast
		```

* **tail：可以查看文件尾部内容，跟踪文件的最新更改**

	* 参数，Linux路径，表示**被跟踪的文件路径**

	* 选项，-f，表示**持续跟踪**

	* 选项，-num，表示，**查看尾部多少行，不填默认10行**

	* ```
		tail [-f -num] Linux路径
		```

		

### 14、vi\vim编辑器

* 简介：vi\vim是visual interface的简称,是Linux中最经典的文本编辑器

* *vim 是 v的加强版本，兼容v的所有指令，不仅能编辑文本，而且还具有 shel 程序编辑的功能，可以不同颜色的字体来辨别语法的正确性，极大方便了程序的设计和编辑性。*

* 三种工作模式

	| 名称         | 作用效果                                                     |
	| ------------ | ------------------------------------------------------------ |
	| 命令模式     | 命令模式下，所敲的按键编辑器都理解为命令，以命令驱动执行不同的功能此模型下，不能自由进行文本编辑。 |
	| 输入模式     | 此模式下，可以对文件内容进行自由编辑。                       |
	| 底线命令模式 | 以  **:**  开始，通常用于文件的保存、退出，                  |

	![1751975358558](C:\Users\ASUS\Documents\WeChat Files\wxid_lkthgmfgos4h12\FileStorage\Temp\1751975358558.png)

* **命令模式快捷键**

	| 模式     | 命令 | 描述                                |
	| -------- | ---- | ----------------------------------- |
	| 命令模式 | i    | 在当前光标位置进入 输入模式         |
	| 命令模式 | a    | 在当前光标位置 之后 进入输入模式    |
	| 命令模式 | o    | 在当前行的开头，进入输入模式        |
	| 命令模式 | I    | 在当前行的结尾，进入输入模式        |
	| 命令模式 | A    | 在当前光标下一行进入 输入模式       |
	| 命令模式 | O    | 在当前光标上一行进入 输 入 模 式    |
	| 输入模式 | esc  | 任何情况下输入 esc 都能回到命令模式 |

	![1751976167209](C:\Users\ASUS\Documents\WeChat Files\wxid_lkthgmfgos4h12\FileStorage\Temp\1751976167209.png)

![1751976238936](C:\Users\ASUS\Documents\WeChat Files\wxid_lkthgmfgos4h12\FileStorage\Temp\1751976238936.png)

![1751976395387](C:\Users\ASUS\Documents\WeChat Files\wxid_lkthgmfgos4h12\FileStorage\Temp\1751976395387.png)

## 三、Linux用户和权限

### 1、Linux的root用户

* root用户拥有**最大的系统操作权限**,而普通用户在许多地方的权限是受限的。
* ==普通用户的权限，一般在其HOME目录内是不受限的==
* ==一旦出了HOME目录,大多数地方,普通用户仅有只读和执行权限,无修改权限==

### 2、su和exit命令

* **su：用于切换账户**

* ```
	su - [用户名]
	```

	* -符号是可选的,表示是否在切换用户后加载环境变量，==建议带上==
	* 参数:用户名,表示要切换的用户,用户名也可以省略,省略表示切换到root
	* ==切换用户后,可以通过**exit命令**退回上一个用户,也可以使用快捷键:ctrl+ d==

### 3、sudo命令

* **sudo：为普通命令授权，临时以root身份执行**

* ```
	sudo 其他命令
	```

	* 在其它命令之前，带上sudo,即可**为这一条命令临时赋予root授权**
	* 但是并不是所有的用户,都有权利使用sudo,我们需要==为普通用户配置sudo认证==

* **为普通用户配置sudo认证过程：**

	* 切换到root用户，执行visudo命令,会自动通过vi编辑器打开:/etc/sudoers

	* 在文件的最后添加:

		* 其中最后的**NOPASSWD:ALL**表示使用sudo命令,**无需输入密码**

		* ```
			用户名 ALL=(ALL)	NOPASSWD: ALL
			```

	* 最后通过 wq 保存

	* 切换回普通用户

	* 执行的命令，均以root运行

		

### 4、用户和用户组

* **用户组的管理**
	* *创建用户组：==groupadd==*
	* *删除用户组：==groupdel==*

* **用户管理**
	* *创建用户：==usersdd [-g -d] 用户名==*
		* 选项:-g指定用户的组，**不指定-g，会创建同名组并自动加入**，指定-g需要组已经存在，如已存在同名组，必须使用-g
		* 选项:-d指定用户H0ME路径，**不指定，HOME目录默认在:/home/用户名**
	* *删除用户：==userdel [r] 用户名==*
		* 选项:-r，删除用户的H0ME目录，**不使用-r，删除用户时，HOME目录保留**
	* *查看用户所属组：==id [用户名]==*
		* 参数:用户名，被查看的用户，如果**不提供则查看自身**
	* *修改用户所属组：==usermod -aG   用户组 用户名==*

* **getent**

	* ```
		getent passwd  ————查看系统中有哪些用户
		getent group   ————查看系统中有哪些用户组
		```

		

	

### 5、查看权限控制

* **认知权限信息**

	![1751982415434](C:\Users\ASUS\Documents\WeChat Files\wxid_lkthgmfgos4h12\FileStorage\Temp\1751982415434.png)

* **对序号1： ** ==具有十个槽位==

	|         | 所属 | 用户 | 权限 | 所属 | 用户组 | 权限 | 其他 | 用户 | 权限 |
	| ------- | ---- | ---- | ---- | ---- | ------ | ---- | ---- | ---- | ---- |
	| -或d或l | r或- | w或- | x或- | r或- | w或-   | x或- | r或- | w或- | x或- |

	* **r表示读权限**——针对文件可以**查看文件内容**；针对文件夹，可以**查看文件夹内容**，如1s命令
	* **w表示写权限**——针对文件表示可以**修改此文件**；针对文件夹，可以在文件夹内:**创建、删除、改名等操作**
	* **x表示执行权限**——针对文件表示可以**将文件作为程序执行**；针对文件夹，表示可以**更改工作目录到此文件夹，即cd进入**



### 6、修改权限控制 —— chmod

* **chmod命令：修改文件、文件夹的权限信息**

* ```
	chmod [-R] 权限 文件或文件夹
	```

	* 选项 : -R,**对文件夹内的全部内容应用同样的操作**

	* ```
		chmod u=rwx,g=rx,o=x hello.txt,将文件权限修改为:rwxr-x--x
		```

		* ==其中 : u表示user所属用户权限 , g表示group组权限 , o表示other其它用户权限==

* **chmod命令的快捷写法：**
	* 权限可以用**3位数字来代表**,第一位数字表示**用户权限**,第二位表示**用户组权限**,第三位表示**其它用户权限**。
	* ==r记为4,w记为2,x记为1==



### 7、修改权限控制 —— chown

* **chown命令：可以修改文件、文件夹的所属用户和用户组**

* ==普通用户无法修改所属为其它用户或组，所以此命令只适用于root用户执行==

* ```
	chown [-R] [用户][:][用户组] 文件或文件夹
	```

	* 选项，-R,同chmod,对文件夹内全部内容应用相同规则
	* 选项，用户，修改**所属用户**
	* 选项，用户组，修改**所属用户组**
	* **:**  用于分隔用户和用户组



## 四、Linux 使用技巧

### 1、各类快捷键

* ctrl + c： 强制停止
* ctrl + d：退出或者登出

* history ：查看历史输入过的命令
	* ！命令前缀：自动执行上一次匹配前缀的命令，从近往远搜
* ctrl + r ：输入内容去匹配历史命令
	* **回车键可以直接执行**
	* **键盘左右键，可以得到此命令(不执行)**

* ctrl + a：跳到命令开头
* ctrl + e：跳到命令结尾
* ctrl + 键盘左键：向左跳一个单词
* ctrl + 键盘右键：向右跳一个单词

* ctrl + l：清空终端内容



### 2、软件安装

* **yum : RPM包软件管理器,用于自动化安装配置Linux软件,并可以自动解决依赖问题**

* ```
	yum [-y] [install | remove | search] 软件名称
	```

	* 选项 : -y,**自动确认**,无需手动确认安装或卸载过程
	* install : 安装
	* remove : 卸载
	* search : 搜索

* ==yum命令需要root权限哦,可以su切换到root,或使用sudo提权。==
* ==yum命令需要联网==



### 3、systemctl控制软件启动关闭

* **systemctl : 启动、停止、开机自启**

* ```
	systemctl [start | stop | status | enable | disable ] 服务名 
	```

	* start 启动；stop 关闭；status 查看状态；enable 开启开机自启；disable 关闭开机自启

* 系统内置服务一般有：
	* NetworkManager，主网络服务
	* network,副网络服务
	* firewalld,防火墙服务
	* sshd , ssh服务(FinalShell远程登录Linux使用的就是这个服务)



### 4、软链接

* **软链接：可以将文件、文件夹链接到其它位置。（类似《快捷方式》）**

* ```
	ln-s 参数1 参数2
	```

	* -s选项,创建软连接
	* 参数1 : 被链接的文件或文件夹
	* 参数2 : 要链接去的目的地



### 5、日期和时区

见视频



### 6、IP地址和主机名

* **ifconfig：查看ip地址**

* 127.0.0.1 / 0.0.0.0 =>>指代本机的ip地址
* **hostname：查看主机名**
* **hostnamectl set-hostname 主机名：修改主机名**
	* 重新登录即可看到
* **域名解析（主机名映射）：通过主机名找到对应的计算机的ip地址**

* **配置Linux的固定ip地址：避免每一次重启后ip地址的不断变换**



### 7、网络请求和下载

* **ping：检查指定的网络服务器是否是可联通状态**

* ```
	ping [-c num] [ip或主机名]
	```

	* 选项 : **-c,检查的次数**，不使用-c选项,将无限次数持续检查
	* 参数 : ip或主机名,**被检查的服务器的ip地址或主机名地址**

* **wget(是非交互式的文件下载器):在命令行内下载网络文件**

* ```
	wget [-b] url
	```

	* 选项 : -b，可选，后台下载,会将日志写入到当前工作目录的wget-log文件
	* 参数 : url,下载链接

* **curl：发送http网络请求，可用于 : 下载文件、获取信息等**

* ```
	curl [-O] url
	```

	* 选项 : -0,用于下载文件,当url是下载链接时,可以使用此选项保存文件

#### 端口：

* 计算机程序之间的通讯,通过**IP只能锁定计算机**,但是**无法锁定具体的程序**
* 通过**端口可以锁定计算机上具体的程序**，确保程序之间进行沟通

* **公认端口** : 1~1023,通常用于一些系统内置或知名程序的预留使用,如SSH服务的22端口,HTTPS服务的443端口非特殊需要，不要占用这个范围的端口	

* **注册端口** : 1024~49151,通常可以随意使用,用于松散的绑定一些程序\服务

* **动态端口** : 49152~65535,通常不会固定绑定程序,而是当程序对外进行网络链接时,用于临时使用。

* ==**nmap：查看端口的占用情况**==

* ```
	nmap 被查看的IP地址
	```

* ==**netstat：查看指定端口的占用情况**==

* ```
	netstat -anp | grep 端口号
	```

	

### 8、进程管理

* **进程：为管理运行的程序,每一个程序在运行的时候,便被操作系统注册为系统中的一个:进程，并会==为每一个进程都分配一个独有的:进程ID(进程号)==**

* **ps：查看Linux系统中的进程信息**

* ```
	ps [-e -f]
	```

	* 选项 : -e，显示出全部的进程
	* 选项 : -f, 以完全格式化的形式展示信息(展示全部信息)

| UID              | PID             | PPID                            | C                         | STIME           | TTY                                         | TIME              | CMD                                |
| ---------------- | --------------- | ------------------------------- | ------------------------- | --------------- | ------------------------------------------- | ----------------- | ---------------------------------- |
| 进程所属的用户ID | 进 程的进程号ID | 进程的父D(启动此进程的其它进程) | 此进程的CPU占用率(百分比) | 进程的启动时 间 | 启动此进程的终端序号，如显示?表示非终端启动 | 进程占用CPU的时间 | 进程对应的名称或启动路径或启动命令 |

* **kill：关闭进程**

* ```
	ki1l [-9] 进程ID
	```

	* 选项 : **-9,表示强制关闭进程**。不使用此选项会向进程发送信号要求其关闭,但是否关闭看进程自身的处理机制



### 9、主机状态监控

* **top：查看CPU、内存使用情况,类似Windows的任务管理器**

* ==默认每5秒刷新一次==
* ==语法: 直接输入top即可,按q或ctrl+c退出==

![1752048041341](C:\Users\ASUS\Documents\WeChat Files\wxid_lkthgmfgos4h12\FileStorage\Temp\1752048041341.png)

详见视频



### 10、环境变量

* **env：查看当前系统中记录的环境变量**

* **$:用于取”变量”的值。**

* **临时设置环境变量：export 变量名 = 变量值**
* **永久生效：**
	* 针对当前用户生效，配置在当前用户的：~/bashrc文件中
	* 针对所有用户生效，配置在系统的:   /etc/profile文件中
	* 并通过语法 : source配置文件，进行立刻生效，或重新登录FinalShell生效

![1752048974017](C:\Users\ASUS\Documents\WeChat Files\wxid_lkthgmfgos4h12\FileStorage\Temp\1752048974017.png)



### 11、上传、下载

* **rz：输入后弹窗选择上传文件**
* **sz 文件名：下载文件**



